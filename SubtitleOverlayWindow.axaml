<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="Clippy.SubtitleOverlayWindow"
        Title="Subtitles"
        Width="800" Height="120"
        MinWidth="300" MinHeight="80"
        Topmost="True"
        SystemDecorations="None"
        TransparencyLevelHint="Transparent"
        Background="Transparent"
        CanResize="True"
        ShowInTaskbar="False"
        WindowStartupLocation="Manual">

    <Border Background="#CC000000"
            CornerRadius="12"
            Padding="24,12"
            Margin="8">
        <Grid RowDefinitions="Auto,*,Auto">
            <!-- Top bar: model label + close button -->
            <TextBlock x:Name="ModelLabel"
                       Grid.Row="0"
                       Text=""
                       FontSize="10"
                       Foreground="#80FFFFFF"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       Margin="0,-2,0,2" />

            <Button Grid.Row="0"
                    Content="&#x2715;"
                    HorizontalAlignment="Right"
                    Padding="6,2"
                    FontSize="13"
                    FontWeight="Bold"
                    Foreground="#AAFFFFFF"
                    Background="Transparent"
                    CornerRadius="4"
                    Cursor="Hand"
                    Margin="0,-4,-8,0"
                    ToolTip.Tip="Close overlay"
                    Click="OnCloseClicked" />

            <ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Margin="0,0,16,0">
                <TextBlock x:Name="SubtitleText"
                           Text="Listening..."
                           FontSize="22"
                           FontWeight="SemiBold"
                           Foreground="White"
                           TextWrapping="Wrap"
                           TextAlignment="Center"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center" />
            </ScrollViewer>

            <!-- Button row -->
            <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,6,0,0"
                        Spacing="6">
                <Button Content="abc--"
                        Padding="10,4"
                        FontSize="11"
                        FontWeight="SemiBold"
                        Foreground="White"
                        Background="#55FFFFFF"
                        CornerRadius="6"
                        Cursor="Hand"
                        ToolTip.Tip="Decrease font size"
                        Click="OnFontDecreaseClicked" />
                <Button Content="ABC++"
                        Padding="10,4"
                        FontSize="11"
                        FontWeight="SemiBold"
                        Foreground="White"
                        Background="#55FFFFFF"
                        CornerRadius="6"
                        Cursor="Hand"
                        ToolTip.Tip="Increase font size"
                        Click="OnFontIncreaseClicked" />
                <Button x:Name="AskButton"
                        Content="Ask"
                        Padding="14,4"
                        FontSize="12"
                        FontWeight="SemiBold"
                        Foreground="White"
                        Background="#55FFFFFF"
                        CornerRadius="6"
                        Cursor="Hand"
                        ToolTip.Tip="Send current text to model for an answer"
                        Click="OnAskClicked" />
            </StackPanel>

            <!-- Resize grip -->
            <Border x:Name="ResizeGrip"
                    Grid.Row="2"
                    Width="18" Height="18"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Cursor="BottomRightCorner"
                    Background="Transparent"
                    Margin="0,0,-6,-4"
                    ToolTip.Tip="Drag to resize">
                <Canvas Width="14" Height="14">
                    <Line StartPoint="10,0" EndPoint="0,10"
                          Stroke="#80FFFFFF" StrokeThickness="1.5" />
                    <Line StartPoint="14,0" EndPoint="0,14"
                          Stroke="#80FFFFFF" StrokeThickness="1.5" />
                    <Line StartPoint="14,4" EndPoint="4,14"
                          Stroke="#80FFFFFF" StrokeThickness="1.5" />
                </Canvas>
            </Border>
        </Grid>
    </Border>
</Window>
